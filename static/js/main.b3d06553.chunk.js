(this["webpackJsonpspacex-react"]=this["webpackJsonpspacex-react"]||[]).push([[0],{154:function(e,t,n){"use strict";n.r(t);var c=n(211),a=n(213),r=n(214),i=n(212),s=n(82),u=n(0),j=n.n(u),o=n(12),b=n.n(o),h=n(210),d=n(55),l=n(13),O=n(14),x=n(195),f=n(197),m=n(198),p=n(108),v=n.n(p),g=n(218),k=n(196),y=n(193),F=n(223),L=n(194),P=n(53),S=n(31),C=n(63),w=n.n(C),D=n(81),I=n(106),N=function(){function e(){Object(P.a)(this,e),this.api="https://api.spacexdata.com/v4/launches"}return Object(S.a)(e,[{key:"getLaunches",value:function(e,t,n){var c=this,a={options:{page:e,limit:t,sort:{flight_number:"desc"}},query:{}};return n&&(a.query={name:{$regex:"".concat(n),$options:"i"}}),Object(D.a)(w.a.post("".concat(this.api,"/query"),a)).pipe(Object(I.a)((function(e){return e.data})),Object(I.a)((function(e){return{data:e.docs.map((function(e){return c.mapLaunch(e)})),total:e.totalDocs}})))}},{key:"getLaunch",value:function(e){var t=this;return Object(D.a)(w.a.get("".concat(this.api,"/").concat(e))).pipe(Object(I.a)((function(e){return t.mapLaunch(e.data)})))}},{key:"favourite",value:function(e){var t=this.getAllFavouriteLaunched();return!t.includes(e)&&(t.push(e),this.storeFavourites(t),!0)}},{key:"isFavourited",value:function(e){return this.getAllFavouriteLaunched().includes(e)}},{key:"removeFavourite",value:function(e){var t=this.getAllFavouriteLaunched();if(!t.includes(e))return!1;this.storeFavourites(t.filter((function(t){return t!==e})))}},{key:"storeFavourites",value:function(e){localStorage.setItem("favouriteLaunches",JSON.stringify(e))}},{key:"getAllFavouriteLaunched",value:function(){var e=localStorage.getItem("favouriteLaunches");if(!e)return[];var t=JSON.parse(e);return Array.isArray(t)?t:[]}},{key:"mapLaunch",value:function(e){var t,n;return{id:e.id,name:e.name,upcoming:e.upcoming,launchDate:e.date_utc,success:e.success,patchImage:null===(t=e.links)||void 0===t||null===(n=t.patch)||void 0===n?void 0:n.small,rocket:e.rocket,favourited:this.isFavourited(e.id)}}}]),e}(),R=Object(u.createContext)(new N),A=function(){return Object(u.useContext)(R)},B=function(){function e(){Object(P.a)(this,e),this.api="https://api.spacexdata.com/v4/rockets"}return Object(S.a)(e,[{key:"getRocket",value:function(e){var t=this;return Object(D.a)(w.a.get("".concat(this.api,"/").concat(e))).pipe(Object(I.a)((function(e){return t.mapRocketData(e.data)})))}},{key:"mapRocketData",value:function(e){return{name:e.name,type:e.type,diameter:e.diameter.meters,height:e.height.meters,mass:e.mass.kg}}}]),e}(),E=Object(u.createContext)(new B),T=n(187),q=n(221),J=n(90),M=n(190),U=n(191),$=n(192),_=n(57),H=n.n(_),W=n(56),z=n.n(W),G=n(78),K=n.n(G),Q=n(76),V=n.n(Q),X=n(77),Y=n.n(X),Z=n(2),ee=Object(T.a)((function(){return Object(q.a)({patch:{width:150,height:150}})})),te=function(e){var t=e.link,n=ee();return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(J.a,{gutterBottom:!0,variant:"h6",component:"h3",children:"Patch image"}),t?Object(Z.jsx)(M.a,{className:n.patch,image:t,title:"Patch image"}):Object(Z.jsx)("span",{children:"N/A"})]})},ne=function(e){var t=e.launchData,n=e.onFavouriteLaunch,c=e.onRemoveFavouriteLaunch;return Object(Z.jsx)(U.a,{variant:"outlined",children:Object(Z.jsxs)($.a,{children:[Object(Z.jsxs)(J.a,{gutterBottom:!0,variant:"h5",component:"h2",children:[t.favourited?Object(Z.jsx)(V.a,{onClick:function(){return c()}}):Object(Z.jsx)(Y.a,{onClick:function(){return n()}})," ",t.name]}),Object(Z.jsxs)("dl",{children:[Object(Z.jsx)("dt",{children:"Name"}),Object(Z.jsx)("dd",{children:t.name}),Object(Z.jsx)("dt",{children:"Launch Date"}),Object(Z.jsx)("dd",{children:t.launchDate}),Object(Z.jsx)("dt",{children:"Upcoming"}),Object(Z.jsx)("dd",{className:"upcoming-status",children:t.upcoming?Object(Z.jsx)(z.a,{}):Object(Z.jsx)(H.a,{})}),Object(Z.jsx)("dt",{children:"Success"}),Object(Z.jsx)("dd",{children:null===t.success?Object(Z.jsx)(K.a,{}):t.success?Object(Z.jsx)(z.a,{}):Object(Z.jsx)(H.a,{})})]}),Object(Z.jsx)(te,{link:t.patchImage})]})})},ce=function(e){var t=e.rocketData;return Object(Z.jsx)(U.a,{variant:"outlined",children:Object(Z.jsxs)($.a,{children:[Object(Z.jsx)(J.a,{gutterBottom:!0,variant:"h5",component:"h2",children:"Rocket"}),Object(Z.jsxs)("dl",{children:[Object(Z.jsx)("dt",{children:"Name"}),Object(Z.jsx)("dd",{children:t.name}),Object(Z.jsx)("dt",{children:"Type"}),Object(Z.jsx)("dd",{children:t.type}),Object(Z.jsx)("dt",{children:"Height"}),Object(Z.jsxs)("dd",{children:[t.mass," m"]}),Object(Z.jsx)("dt",{children:"Diameter"}),Object(Z.jsxs)("dd",{children:[t.diameter," m"]}),Object(Z.jsx)("dt",{children:"Mass"}),Object(Z.jsxs)("dd",{children:[t.mass," kg"]})]})]})})},ae=function(e){var t,n=e.launchId,c=Object(u.useState)(!1),a=Object(O.a)(c,2),r=a[0],i=a[1],s=Object(u.useState)(!1),j=Object(O.a)(s,2),o=j[0],b=j[1],h=Object(u.useState)(null),l=Object(O.a)(h,2),p=l[0],P=l[1],S=Object(u.useState)(null),C=Object(O.a)(S,2),w=C[0],D=C[1],I=A(),N=Object(u.useContext)(E),R=function(e){var t=Object.assign({},p);t.favourited=e,P(t)};return Object(u.useEffect)((function(){i(!0),b(!1);var e=I.getLaunch(n).pipe(Object(y.a)((function(e){return P(e)})),Object(F.a)((function(e){return N.getRocket(e.rocket)})),Object(y.a)((function(e){return D(e)})),Object(L.a)((function(){return i(!1)}))).subscribe({error:function(){return b(!0)}});return function(){return e.unsubscribe()}}),[n]),o&&(t=Object(Z.jsxs)(g.a,{severity:"error",children:[Object(Z.jsx)(k.a,{children:"Error"}),"The requested launch cannot be fetched :("]})),Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsxs)(x.a,{color:"primary",component:d.b,to:"/",children:[Object(Z.jsx)(v.a,{})," Back to the list"]}),r&&Object(Z.jsx)(f.a,{}),t,p&&w&&Object(Z.jsxs)(m.a,{container:!0,spacing:3,children:[Object(Z.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(Z.jsx)(ne,{launchData:p,onFavouriteLaunch:function(){I.favourite(n)&&R(!0)},onRemoveFavouriteLaunch:function(){I.removeFavourite(n)&&R(!1)}})}),Object(Z.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(Z.jsx)(ce,{rocketData:w})})]})]})},re=n(220),ie=n(216),se=n(199),ue=n(200),je=n(201),oe=n(202),be=n(203),he=n(204),de=n(205),le=n(217),Oe=Object(T.a)((function(){return Object(q.a)({loadingIndicator:{padding:0},table:{minWidth:500}})})),xe=function(e){var t,n=Oe();return e.loading&&(t=Object(Z.jsx)(se.a,{children:Object(Z.jsx)(ue.a,{colSpan:5,className:n.loadingIndicator,children:Object(Z.jsx)(f.a,{})})})),Object(Z.jsxs)(je.a,{children:[Object(Z.jsxs)(oe.a,{className:n.table,"aria-label":"Launches table",children:[Object(Z.jsx)(be.a,{children:Object(Z.jsxs)(se.a,{children:[Object(Z.jsx)(ue.a,{}),Object(Z.jsx)(ue.a,{children:"Name"}),Object(Z.jsx)(ue.a,{children:"Launch Date"}),Object(Z.jsx)(ue.a,{children:"Upcoming"}),Object(Z.jsx)(ue.a,{children:"Successful"})]})}),Object(Z.jsxs)(he.a,{children:[t,e.data.map((function(t,n){return Object(Z.jsxs)(se.a,{hover:!0,children:[Object(Z.jsx)(ue.a,{children:t.favourited?Object(Z.jsx)(V.a,{onClick:function(){return e.onRemoveFavouriteLaunch(t.id)}}):Object(Z.jsx)(Y.a,{onClick:function(){return e.onFavouriteLaunch(t.id)}})}),Object(Z.jsx)(ue.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)(de.a,{component:d.b,to:"/launch/"+t.id,children:t.name})})}),Object(Z.jsx)(ue.a,{children:t.launchDate}),Object(Z.jsx)(ue.a,{children:t.upcoming?Object(Z.jsx)(z.a,{}):Object(Z.jsx)(H.a,{})}),Object(Z.jsx)(ue.a,{children:null==t.success?Object(Z.jsx)(K.a,{}):t.success?Object(Z.jsx)(z.a,{}):Object(Z.jsx)(H.a,{})})]},"launch-"+n)}))]})]}),Object(Z.jsx)(le.a,{component:"div",count:e.total,page:e.page,rowsPerPage:e.rowsPerPage,rowsPerPageOptions:[1,5,10,15],onChangePage:function(t,n){e.onChangePage(n)},onChangeRowsPerPage:function(t){e.onChangeRowsPerPage(parseInt(t.target.value))}})]})},fe=n(208),me=n(219),pe=n(209),ve=n(109),ge=n.n(ve),ke=function(e){var t=e.onChange;return Object(Z.jsx)(fe.a,{children:Object(Z.jsx)(me.a,{id:"launch-name",type:"search",label:"Launch name",onChange:function(e){t(e.target.value.trim())},InputProps:{startAdornment:Object(Z.jsx)(pe.a,{position:"start",children:Object(Z.jsx)(ge.a,{})})}})})},ye=Object(T.a)((function(){return Object(q.a)({root:{width:"100%"},paper:{padding:"2rem"},searchField:{marginBottom:"2rem"}})})),Fe=function(){var e,t=ye(),n=A(),c=Object(u.useState)(!1),a=Object(O.a)(c,2),r=a[0],i=a[1],s=Object(u.useState)(!1),j=Object(O.a)(s,2),o=j[0],b=j[1],h=Object(u.useState)(0),d=Object(O.a)(h,2),l=d[0],x=d[1],f=Object(u.useState)(10),m=Object(O.a)(f,2),p=m[0],v=m[1],y=Object(u.useState)(0),F=Object(O.a)(y,2),P=F[0],S=F[1],C=Object(u.useState)([]),w=Object(O.a)(C,2),D=w[0],I=w[1],N=Object(u.useState)(""),R=Object(O.a)(N,2),B=R[0],E=R[1],T=Object(u.useState)((function(){return new re.a([])})),q=Object(O.a)(T,1)[0],J=Object(u.useState)((function(){return new re.a("")})),M=Object(O.a)(J,1)[0],U=function(e,t){var n=D.map((function(e){return Object.assign({},e)})),c=n.find((function(t){return t.id==e}));c&&(c.favourited=t),q.next(n)};return Object(u.useEffect)((function(){var e=q.subscribe(I);return function(){return e.unsubscribe()}}),[]),Object(u.useEffect)((function(){i(!0);var e=n.getLaunches(l+1,p,B||null).pipe(Object(L.a)((function(){return i(!1)}))).subscribe({next:function(e){q.next(e.data),S(e.total)},error:function(){return b(!0)}});return function(){return e.unsubscribe()}}),[l,p,B]),Object(u.useEffect)((function(){var e=M.pipe(Object(ie.a)(500)).subscribe((function(e){E(e),x(0)}));return function(){return e.unsubscribe()}}),[]),o&&(e=Object(Z.jsxs)(g.a,{severity:"error",children:[Object(Z.jsx)(k.a,{children:"Error"}),"The launches list cannot be fetched :("]})),Object(Z.jsxs)("div",{className:t.root,children:[Object(Z.jsx)("div",{className:t.searchField,children:Object(Z.jsx)(ke,{onChange:function(e){M.next(e)}})}),e,Object(Z.jsx)(xe,{loading:r,data:D,total:P,page:l,rowsPerPage:p,onChangePage:function(e){x(e)},onChangeRowsPerPage:function(e){v(e),x(0)},onFavouriteLaunch:function(e){n.favourite(e)&&U(e,!0)},onRemoveFavouriteLaunch:function(e){n.removeFavourite(e),U(e,!1)}})]})};var Le=function(){return Object(Z.jsx)(d.a,{basename:"".concat("/spacex-react","/"),children:Object(Z.jsx)(h.a,{children:Object(Z.jsxs)(l.c,{children:[Object(Z.jsx)(l.a,{path:"/launch/:id",exact:!0,render:function(e){return Object(Z.jsx)(ae,{launchId:e.match.params.id})}}),Object(Z.jsx)(l.a,{path:"/",children:Object(Z.jsx)(Fe,{})})]})})})},Pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,224)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},Se=Object(c.a)({palette:{primary:i.a,secondary:s.a,type:"dark"}});b.a.render(Object(Z.jsx)(j.a.StrictMode,{children:Object(Z.jsxs)(a.a,{theme:Se,children:[Object(Z.jsx)(r.a,{}),Object(Z.jsx)(Le,{})]})}),document.getElementById("root")),Pe()}},[[154,1,2]]]);
//# sourceMappingURL=main.b3d06553.chunk.js.map